<div class="edit-wrapper">
  <div class="container">

    <div class="edit-profile">
      <%= form_for(@user) do |f| %>
        <div class="profile-left">
          <%= image_tag("/#{@user.image_name}", id: "preview") %>
          <label for="user_file">
            画像を変更
            <%= f.file_field :file, accept: "image/*", onchange: "previewImage(this);" %>
          </label>
          <!--
          <img id="preview" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" style="max-width:200px;">
          -->
        </div> 
        <div class="profile-right">
          <%= link_to(@user.name, user_path(@user)) %>
          <%= f.text_area :bio %>
          <%= f.submit value: "更新", data: { disable_with: "更新" } %>
        </div>
      <% end %>
    </div>

  </div>
</div>


<script>
  function previewImage(obj)
  {
    var fileReader = new FileReader();
    fileReader.onload = (function() {
      document.getElementById('preview').src = fileReader.result;
    });
    fileReader.readAsDataURL(obj.files[0]);
  }
</script>
